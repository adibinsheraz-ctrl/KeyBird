/* ===================================
   RESPONSIVE DESIGN - MOBILE OPTIMIZATION
   =================================== */

/* Base overrides for mobile */
@media (max-width: 900px) {
    body {
        background-size: 20px 20px;
    }

    .game-container {
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 0 0 4px #444, 0 10px 30px rgba(0, 0, 0, 0.8);
        max-width: 100vw;
        width: 100vw;
        height: 100vh;
        border-radius: 0;
        animation: none;
        /* Disable float on mobile to save perf and avoid jitter */
    }

    #gameCanvas {
        height: auto;
        width: 100%;
        max-height: 80vh;
        max-width: 100%;
        border-width: 3px;
    }

    /* Standardized Touch Targets */
    button {
        min-height: 44px;
        touch-action: manipulation;
    }

    /* Mode Controls Positioning */
    .mode-controls {
        top: 15px;
        left: 15px;
        gap: 10px;
    }

    .mode-btn {
        padding: 8px 12px;
        font-size: 9px;
    }

    /* Mute Button Positioning */
    .mute-btn {
        top: 15px;
        right: 15px;
        width: 44px;
        height: 44px;
        font-size: 20px;
    }

    /* Selection Menu Responsiveness */
    .selection-menu {
        bottom: 15%;
        /* Positioned relative to screen height */
        width: 92%;
        max-width: 340px;
        padding: 12px 8px;
        gap: 8px;
    }

    .selection-title {
        font-size: 9px;
    }

    .bird-option {
        padding: 10px 4px;
    }

    .bird-option span {
        font-size: 6px;
    }

    .bird-icon {
        width: 28px;
        height: 28px;
        min-height: 28px;
    }

    /* Credits Positioning */
    .credits {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        font-size: 8px;
        padding: 6px;
        margin-top: 0;
    }
}

/* Specific Landscape Adjustments */
@media (max-height: 500px) and (orientation: landscape) {
    .game-container {
        flex-direction: row;
        justify-content: space-around;
        padding: 5px;
    }

    #gameCanvas {
        height: 95vh;
        width: auto;
        max-height: 95vh;
    }

    .mode-controls {
        position: static;
        flex-direction: column;
        transform: none;
        width: auto;
        order: -1;
        /* Move to left */
    }

    .selection-menu {
        position: static;
        transform: none;
        width: 180px;
        order: 1;
        /* Move to right */
        bottom: auto;
        padding: 5px;
    }

    .bird-options {
        flex-direction: column;
        gap: 4px;
    }

    .mute-btn {
        position: fixed;
        bottom: 10px;
        right: 10px;
        top: auto;
    }

    .credits {
        display: none;
        /* Hide credits in tight landscape */
    }
}

/* Portrait adjustments for very narrow screens */
@media (max-width: 350px) {
    .mode-btn {
        font-size: 7px;
        padding: 6px 8px;
    }

    .selection-menu {
        bottom: 12%;
    }

    .bird-option span {
        font-size: 5px;
    }
}

/* Portrait adjustments for taller screens (iPhone 12/13/14/15 Pro Max etc) */
@media (min-height: 800px) and (max-width: 600px) {
    #gameCanvas {
        max-height: 75vh;
    }

    .selection-menu {
        bottom: 180px;
    }
}

/* Support for Safe Areas (iPhone Notch) */
@supports (padding: env(safe-area-inset-top)) {
    .mode-controls {
        top: calc(15px + env(safe-area-inset-top));
        left: calc(15px + env(safe-area-inset-left));
    }

    .mute-btn {
        top: calc(15px + env(safe-area-inset-top));
        right: calc(15px + env(safe-area-inset-right));
    }

    .credits {
        bottom: calc(10px + env(safe-area-inset-bottom));
    }
}

/* CRT and Vignette Fixes for Mobile */
@media (max-width: 900px) {

    .crt-overlay,
    .vignette {
        border-radius: 0;
        /* Full screen on mobile */
    }

    .game-container {
        overflow: hidden;
        /* Prevent scrolls from juice effects */
    }
}